Object.create||(Object.create=function(){function a(){}return function(b){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}()),Object.keys||(Object.keys=function(a,b,c){c=[];for(b in a)c.hasOwnProperty.call(a,b)&&c.push(b);return c}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=arguments.length>=2?arguments[1]:void 0,e=0;c>e;e++)e in b&&a.call(d,b[e],e,b);return this}),Array.prototype.filter||(Array.prototype.filter=function(a,b){var c=[];return this.forEach(function(d,e,f){a.call(b||void 0,d,e,f)&&c.push(d)}),c}),Array.prototype.map||(Array.prototype.map=function(a,b){var c=[];return this.forEach(function(d,e,f){c.push(a.call(b||void 0,d,e,f))}),c}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),"object"!=typeof window||"object"!=typeof window.location||window.location.assign||(window.location.assign=function(a){window.location=a}),Function.prototype.bind||(Function.prototype.bind=function(a){function b(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=[].slice,d=c.call(arguments,1),e=this,f=function(){return e.apply(this instanceof b?this:a||window,d.concat(c.call(arguments)))};return b.prototype=this.prototype,f.prototype=new b,f});var hello=function(a){return hello.use(a)};hello.utils={extend:function(a){return Array.prototype.slice.call(arguments,1).forEach(function(b){if(a instanceof Object&&b instanceof Object&&a!==b)for(var c in b)a[c]=hello.utils.extend(a[c],b[c]);else a=b}),a}},hello.utils.extend(hello,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,popup:{resizable:1,scrollbars:1,width:500,height:550},default_service:null,force:null,page_uri:window.location.href},services:{},use:function(a){var b=Object.create(this);return b.settings=Object.create(this.settings),a&&(b.settings.default_service=a),b.utils.Event.call(b),b},init:function(a,b){var c=this.utils;if(!a)return this.services;for(var d in a)a.hasOwnProperty(d)&&"object"!=typeof a[d]&&(a[d]={id:a[d]});c.extend(this.services,a);for(d in this.services)this.services.hasOwnProperty(d)&&(this.services[d].scope=this.services[d].scope||{});return b&&(c.extend(this.settings,b),"redirect_uri"in b&&(this.settings.redirect_uri=c.url(b.redirect_uri).href)),this},login:function(){function a(a,b){hello.emit(a,b)}function b(a){return a}function c(a){return!!a}var d,e=this,f=e.utils,g=f.error,h=f.Promise(),i=f.args({network:"s",options:"o",callback:"f"},arguments),j=f.diffKey(i.options,e.settings),k=i.options=f.merge(e.settings,i.options||{});if(k.popup=f.merge(e.settings.popup,i.options.popup||{}),i.network=i.network||e.settings.default_service,h.proxy.then(i.callback,i.callback),h.proxy.then(a.bind(this,"auth.login auth"),a.bind(this,"auth.failed auth")),"string"!=typeof i.network||!(i.network in e.services))return h.reject(g("invalid_network","The provided network was not recognized"));var l=e.services[i.network],m=f.globalEvent(function(a){var b;b=a?JSON.parse(a):g("cancelled","The authentication was not completed"),b.error?h.reject(b):(f.store(b.network,b),h.fulfill({network:b.network,authResponse:b}))}),n=f.url(k.redirect_uri).href,o=l.oauth.response_type||k.response_type;/\bcode\b/.test(o)&&!l.oauth.grant&&(o=o.replace(/\bcode\b/,"token")),i.qs=f.merge(j,{client_id:encodeURIComponent(l.id),response_type:encodeURIComponent(o),redirect_uri:encodeURIComponent(n),display:k.display,scope:"basic",state:{client_id:l.id,network:i.network,display:k.display,callback:m,state:k.state,redirect_uri:n}});var p=f.store(i.network),q=/[,\s]+/,r=(k.scope||"").toString()+","+i.qs.scope;if(p&&"scope"in p&&p.scope instanceof String&&(r+=","+p.scope),r=r.split(q),r=f.unique(r).filter(c),i.qs.state.scope=r.join(","),r=r.map(function(a){if(a in l.scope)return l.scope[a];for(var b in e.services){var c=e.services[b].scope;if(c&&a in c)return""}return a}),r=r.join(",").split(q),r=f.unique(r).filter(c),i.qs.scope=r.join(l.scope_delim||","),k.force===!1&&p&&"access_token"in p&&p.access_token&&"expires"in p&&p.expires>(new Date).getTime()/1e3){var s=f.diff((p.scope||"").split(q),(i.qs.state.scope||"").split(q));if(0===s.length)return h.fulfill({unchanged:!0,network:i.network,authResponse:p}),h}if("page"===k.display&&k.page_uri&&(i.qs.state.page_uri=f.url(k.page_uri).href),"login"in l&&"function"==typeof l.login&&l.login(i),(!/\btoken\b/.test(o)||parseInt(l.oauth.version,10)<2||"none"===k.display&&l.oauth.grant&&p&&p.refresh_token)&&(i.qs.state.oauth=l.oauth,i.qs.state.oauth_proxy=k.oauth_proxy),i.qs.state=encodeURIComponent(JSON.stringify(i.qs.state)),1===parseInt(l.oauth.version,10)?d=f.qs(k.oauth_proxy,i.qs,b):"none"===k.display&&l.oauth.grant&&p&&p.refresh_token?(i.qs.refresh_token=p.refresh_token,d=f.qs(k.oauth_proxy,i.qs,b)):d=f.qs(l.oauth.auth,i.qs,b),"none"===k.display)f.iframe(d,n);else if("popup"===k.display)var t=f.popup(d,n,k.popup),u=setInterval(function(){if((!t||t.closed)&&(clearInterval(u),!h.state)){var a=g("cancelled","Login has been cancelled");t||(a=g("blocked","Popup was blocked")),a.network=i.network,h.reject(a)}},100);else window.location=d;return h.proxy},logout:function(){function a(a,b){hello.emit(a,b)}var b=this,c=b.utils,d=c.error,e=c.Promise(),f=c.args({name:"s",options:"o",callback:"f"},arguments);if(f.options=f.options||{},e.proxy.then(f.callback,f.callback),e.proxy.then(a.bind(this,"auth.logout auth"),a.bind(this,"error")),f.name=f.name||this.settings.default_service,f.authResponse=c.store(f.name),!f.name||f.name in b.services)if(f.name&&f.authResponse){var g=function(a){c.store(f.name,""),e.fulfill(hello.utils.merge({network:f.name},a||{}))},h={};if(f.options.force){var i=b.services[f.name].logout;if(i)if("function"==typeof i&&(i=i(g,f)),"string"==typeof i)c.iframe(i),h.force=null,h.message="Logout success on providers site was indeterminate";else if(void 0===i)return e.proxy}g(h)}else e.reject(d("invalid_session","There was no session to remove"));else e.reject(d("invalid_network","The network was unrecognized"));return e.proxy},getAuthResponse:function(a){return a=a||this.settings.default_service,a&&a in this.services?this.utils.store(a)||null:null},events:{}}),hello.utils.extend(hello.utils,{error:function(a,b){return{error:{code:a,message:b}}},qs:function(a,b,c){if(b){c=c||encodeURIComponent;for(var d in b){var e="([\\?\\&])"+d+"=[^\\&]*";reg=new RegExp(e),a.match(reg)&&(a=a.replace(reg,"$1"+d+"="+c(b[d])),delete b[d])}}return this.isEmpty(b)?a:a+(a.indexOf("?")>-1?"&":"?")+this.param(b,c)},param:function(a,b){var c,d,e={};if("string"==typeof a){if(b=b||decodeURIComponent,d=a.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var f=0;f<d.length;f++)c=d[f].match(/([^=]+)=(.*)/),e[c[1]]=b(c[2]);return e}b=b||encodeURIComponent;var g=a;e=[];for(var h in g)g.hasOwnProperty(h)&&g.hasOwnProperty(h)&&e.push([h,"?"===g[h]?"?":b(g[h])].join("="));return e.join("&")},store:function(){function a(){var a={};try{a=JSON.parse(c.getItem("hello"))||{}}catch(b){}return a}function b(a){c.setItem("hello",JSON.stringify(a))}for(var c,d=["localStorage","sessionStorage"],e=-1,f="test";d[++e];)try{c=window[d[e]],c.setItem(f+e,e),c.removeItem(f+e);break}catch(g){c=null}if(!c){var h=null;c={getItem:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].replace(/(^\s+|\s+$)/,"");if(d&&0===d.indexOf(a))return d.substr(a.length)}return h},setItem:function(a,b){h=b,document.cookie=a+"="+b}},h=c.getItem("hello")}return function(c,d){var e=a();if(c&&void 0===d)return e[c]||null;if(c&&null===d)try{delete e[c]}catch(f){e[c]=null}else{if(!c)return e;e[c]=d}return b(e),e||null}}(),append:function(a,b,c){var d="string"==typeof a?document.createElement(a):a;if("object"==typeof b)if("tagName"in b)c=b;else for(var e in b)if(b.hasOwnProperty(e))if("object"==typeof b[e])for(var f in b[e])b[e].hasOwnProperty(f)&&(d[e][f]=b[e][f]);else"html"===e?d.innerHTML=b[e]:/^on/.test(e)?d[e]=b[e]:d.setAttribute(e,b[e]);return"body"===c?!function g(){document.body?document.body.appendChild(d):setTimeout(g,16)}():"object"==typeof c?c.appendChild(d):"string"==typeof c&&document.getElementsByTagName(c)[0].appendChild(d),d},iframe:function(a){this.append("iframe",{src:a,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var a=Array.prototype.slice.call(arguments);return a.unshift({}),this.extend.apply(null,a)},args:function(a,b){var c={},d=0,e=null,f=null;for(f in a)if(a.hasOwnProperty(f))break;if(1===b.length&&"object"==typeof b[0]&&"o!"!=a[f])for(f in b[0])if(a.hasOwnProperty(f)&&f in a)return b[0];for(f in a)if(a.hasOwnProperty(f))if(e=typeof b[d],"function"==typeof a[f]&&a[f].test(b[d])||"string"==typeof a[f]&&(a[f].indexOf("s")>-1&&"string"===e||a[f].indexOf("o")>-1&&"object"===e||a[f].indexOf("i")>-1&&"number"===e||a[f].indexOf("a")>-1&&"object"===e||a[f].indexOf("f")>-1&&"function"===e))c[f]=b[d++];else if("string"==typeof a[f]&&a[f].indexOf("!")>-1)return!1;return c},url:function(a){if(a){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(a,window.location);var b=document.createElement("a");return b.href=a,b}return window.location},diff:function(a,b){return b.filter(function(b){return-1===a.indexOf(b)})},diffKey:function(a,b){if(a||!b){var c={};for(var d in a)d in b||(c[d]=a[d]);return c}return a},unique:function(a){return Array.isArray(a)?a.filter(function(b,c){return a.indexOf(b)===c}):[]},isEmpty:function(a){if(!a)return!0;if(Array.isArray(a))return!a.length;if("object"==typeof a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},Promise:function(){var a=0,b=1,c=2,d=function(b){return this instanceof d?(this.id="Thenable/1.0.6",this.state=a,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof b&&b.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new d(b)};d.prototype={fulfill:function(a){return e(this,b,"fulfillValue",a)},reject:function(a){return e(this,c,"rejectReason",a)},then:function(a,b){var c=this,e=new d;return c.onFulfilled.push(h(a,e,"fulfill")),c.onRejected.push(h(b,e,"reject")),f(c),e.proxy}};var e=function(b,c,d,e){return b.state===a&&(b.state=c,b[d]=e,f(b)),b},f=function(a){a.state===b?g(a,"onFulfilled",a.fulfillValue):a.state===c&&g(a,"onRejected",a.rejectReason)},g=function(a,b,c){if(0!==a[b].length){var d=a[b];a[b]=[];var e=function(){for(var a=0;a<d.length;a++)d[a](c)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(e):"function"==typeof setImmediate?setImmediate(e):setTimeout(e,0)}},h=function(a,b,c){return function(d){if("function"!=typeof a)b[c].call(b,d);else{var e;try{e=a(d)}catch(f){return void b.reject(f)}i(b,e)}}},i=function(a,b){if(a===b||a.proxy===b)return void a.reject(new TypeError("cannot resolve promise with itself"));var c;if("object"==typeof b&&null!==b||"function"==typeof b)try{c=b.then}catch(d){return void a.reject(d)}if("function"!=typeof c)a.fulfill(b);else{var e=!1;try{c.call(b,function(c){e||(e=!0,c===b?a.reject(new TypeError("circular thenable chain")):i(a,c))},function(b){e||(e=!0,a.reject(b))})}catch(d){e||a.reject(d)}}};return d}(),Event:function(){var a=/[\s\,]+/;return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(b,c){if(c&&"function"==typeof c)for(var d=b.split(a),e=0;e<d.length;e++)this.events[d[e]]=[c].concat(this.events[d[e]]||[]);return this},this.off=function(a,b){return this.findEvents(a,function(a,c){b&&this.events[a][c]!==b||(this.events[a][c]=null)}),this},this.emit=function(a){var b=Array.prototype.slice.call(arguments,1);b.push(a);for(var c=function(c,d){b[b.length-1]="*"===c?a:c,this.events[c][d].apply(this,b)},d=this;d&&d.findEvents;)d.findEvents(a+",*",c),d=d.parent;return this},this.emitAfter=function(){var a=this,b=arguments;return setTimeout(function(){a.emit.apply(a,b)},0),this},this.findEvents=function(b,c){var d=b.split(a);for(var e in this.events)if(this.events.hasOwnProperty(e)&&d.indexOf(e)>-1)for(var f=0;f<this.events[e].length;f++)this.events[e][f]&&c.call(this,e,f)},this},globalEvent:function(a,b){return b=b||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[b]=function(){try{a.apply(this,arguments)&&delete window[b]}catch(c){console.error(c)}},b},popup:function(a,b,c){var d=document.documentElement;if(c.height){var e=void 0!==window.screenTop?window.screenTop:screen.top,f=screen.height||window.innerHeight||d.clientHeight;c.top=parseInt((f-c.height)/2,10)+e}if(c.width){var g=void 0!==window.screenLeft?window.screenLeft:screen.left,h=screen.width||window.innerWidth||d.clientWidth;c.left=parseInt((h-c.width)/2,10)+g}var i=[];Object.keys(c).forEach(function(a){var b=c[a];i.push(a+(null!==b?"="+b:""))});var j=function(a){var c=window.open(a,"_blank",i.join(","));try{if(c&&c.addEventListener){var d=hello.utils.url(b),e=d.origin||d.protocol+"//"+d.hostname;c.addEventListener("loadstart",function(a){var b=a.url;if(0===b.indexOf(e)){var d=hello.utils.url(b),f={location:{assign:function(a){c.addEventListener("exit",function(){setTimeout(function(){j(a)},1e3)})},search:d.search,hash:d.hash,href:d.href},close:function(){c.close&&c.close()}};hello.utils.responseHandler(f,window),f.close()}})}}catch(f){}return c&&c.focus&&c.focus(),c};return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(a=b+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(a))),j(a)},responseHandler:function(a,b){function c(a,b,c){var e=a.callback,g=a.network;if(f.store(g,a),!("display"in a&&"page"===a.display)){if(c&&e&&e in c){try{delete a.callback}catch(h){}f.store(g,a);var i=JSON.stringify(a);try{c[e](i)}catch(h){}}d()}}function d(){try{a.close()}catch(b){}a.addEventListener&&a.addEventListener("load",function(){a.close()})}var e,f=this,g=a.location;if(e=f.param(g.search),e&&e.state&&(e.code||e.oauth_token)){var h=JSON.parse(e.state);e.redirect_uri=h.redirect_uri||g.href.replace(/[\?\#].*$/,"");var i=h.oauth_proxy+"?"+f.param(e);return void g.assign(i)}if(e=f.merge(f.param(g.search||""),f.param(g.hash||"")),e&&"state"in e){try{var j=JSON.parse(e.state);f.extend(e,j)}catch(k){console.error("Could not decode state parameter")}if("access_token"in e&&e.access_token&&e.network)e.expires_in&&0!==parseInt(e.expires_in,10)||(e.expires_in=0),e.expires_in=parseInt(e.expires_in,10),e.expires=(new Date).getTime()/1e3+(e.expires_in||31536e3),c(e,a,b);else if("error"in e&&e.error&&e.network)e.error={code:e.error,message:e.error_message||e.error_description},c(e,a,b);else if(e.callback&&e.callback in b){var l="result"in e&&e.result?JSON.parse(e.result):!1;b[e.callback](l),d()}e.page_uri&&g.assign(e.page_uri)}else if("oauth_redirect"in e)return void g.assign(decodeURIComponent(e.oauth_redirect))}}),hello.utils.Event.call(hello),hello.utils.responseHandler(window,window.opener||window.parent),function(a){var b={},c={};a.on("auth.login, auth.logout",function(c){c&&"object"==typeof c&&c.network&&(b[c.network]=a.utils.store(c.network)||{})}),function d(){var e=(new Date).getTime()/1e3,f=function(b){a.emit("auth."+b,{network:g,authResponse:h})};for(var g in a.services)if(a.services.hasOwnProperty(g)){if(!a.services[g].id)continue;var h=a.utils.store(g)||{},i=a.services[g],j=b[g]||{};if(h&&"callback"in h){var k=h.callback;try{delete h.callback}catch(l){}a.utils.store(g,h);try{window[k](h)}catch(l){}}if(h&&"expires"in h&&h.expires<e){var m=i.refresh||h.refresh_token;!m||g in c&&!(c[g]<e)?m||g in c||(f("expired"),c[g]=!0):(a.emit("notice",g+" has expired trying to resignin"),a.login(g,{display:"none",force:!1}),c[g]=e+600);continue}if(j.access_token===h.access_token&&j.expires===h.expires)continue;!h.access_token&&j.access_token?f("logout"):h.access_token&&!j.access_token?f("login"):h.expires!==j.expires&&f("update"),b[g]=h,g in c&&delete c[g]}setTimeout(d,1e3)}()}(hello),hello.api=function(){function a(a){a=a.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(a,b,c){var g=c?c.replace(/^\|/,""):"";return b in f.query?(g=f.query[b],delete f.query[b]):f.data&&b in f.data?(g=f.data[b],delete f.data[b]):c||e.reject(d("missing_attribute","The attribute "+b+" is missing from the request")),g}),a.match(/^https?:\/\//)||(a=j.base+a),f.url=a,c.request(f,function(a,b){if(!f.formatResponse)return void(("object"==typeof b?b.statusCode>=400:"object"==typeof a&&"error"in a)?e.reject(a):e.fulfill(a));if(a===!0?a={success:!0}:a||(a={}),"delete"===f.method&&(a=!a||c.isEmpty(a)?{success:!0}:a),j.wrap&&(f.path in j.wrap||"default"in j.wrap)){var d=f.path in j.wrap?f.path:"default",g=((new Date).getTime(),j.wrap[d](a,b,f));g&&(a=g)}a&&"paging"in a&&a.paging.next&&("?"===a.paging.next[0]?a.paging.next=f.path+a.paging.next:a.paging.next+="#"+f.path),!a||"error"in a?e.reject(a):e.fulfill(a)})}var b=this,c=b.utils,d=c.error,e=c.Promise(),f=c.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);f.method=(f.method||"get").toLowerCase(),f.headers=f.headers||{},f.query=f.query||{},("get"===f.method||"delete"===f.method)&&(c.extend(f.query,f.data),f.data={});var g=f.data=f.data||{};if(e.then(f.callback,f.callback),!f.path)return e.reject(d("invalid_path","Missing the path parameter from the request"));f.path=f.path.replace(/^\/+/,"");var h=(f.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(h in b.services){f.network=h;var i=new RegExp("^"+h+":?/?");f.path=f.path.replace(i,"")}f.network=b.settings.default_service=f.network||b.settings.default_service;var j=b.services[f.network];if(!j)return e.reject(d("invalid_network","Could not match the service requested: "+f.network));if(f.method in j&&f.path in j[f.method]&&j[f.method][f.path]===!1)return e.reject(d("invalid_path","The provided path is not available on the selected network"));f.oauth_proxy||(f.oauth_proxy=b.settings.oauth_proxy),"proxy"in f||(f.proxy=f.oauth_proxy&&j.oauth&&1===parseInt(j.oauth.version,10)),"timeout"in f||(f.timeout=b.settings.timeout),"formatResponse"in f||(f.formatResponse=!0),f.authResponse=b.getAuthResponse(f.network),f.authResponse&&f.authResponse.access_token&&(f.query.access_token=f.authResponse.access_token);var k,l=f.path;f.options=c.clone(f.query),f.data=c.clone(g);var m=j[{"delete":"del"}[f.method]||f.method]||{};if("get"===f.method){var n=l.split(/[\?#]/)[1];n&&(c.extend(f.query,c.param(n)),l=l.replace(/\?.*?(#|$)/,"$1"))}return(k=l.match(/#(.+)/,""))?(l=l.split("#")[0],f.path=k[1]):l in m?(f.path=l,l=m[l]):"default"in m&&(l=m["default"]),f.redirect_uri=b.settings.redirect_uri,f.xhr=j.xhr,f.jsonp=j.jsonp,f.form=j.form,"function"==typeof l?l(f,a):a(l),e.proxy},hello.utils.extend(hello.utils,{request:function(a,b){function c(a,b){var c;a.authResponse&&a.authResponse.oauth&&1===parseInt(a.authResponse.oauth.version,10)&&(c=a.query.access_token,delete a.query.access_token,a.proxy=!0),!a.data||"get"!==a.method&&"delete"!==a.method||(d.extend(a.query,a.data),a.data=null);var e=d.qs(a.url,a.query);a.proxy&&(e=d.qs(a.oauth_proxy,{path:e,access_token:c||"",then:a.proxy_response_type||("get"===a.method.toLowerCase()?"redirect":"proxy"),method:a.method.toLowerCase(),suppress_response_codes:!0})),b(e)}var d=this,e=d.error;d.isEmpty(a.data)||"FileList"in window||!d.hasBinary(a.data)||(a.xhr=!1,a.jsonp=!1);var f=this.request_cors(function(){return void 0===a.xhr||a.xhr&&("function"!=typeof a.xhr||a.xhr(a,a.query))});if(f)return void c(a,function(c){var e=d.xhr(a.method,c,a.headers,a.data,b);e.onprogress=a.onprogress||null,e.upload&&a.onuploadprogress&&(e.upload.onprogress=a.onuploadprogress)});var g=a.query;if(a.query=d.clone(a.query),a.callbackID=d.globalEvent(),a.jsonp!==!1){if(a.query.callback=a.callbackID,"function"==typeof a.jsonp&&a.jsonp(a,a.query),"get"===a.method)return void c(a,function(c){d.jsonp(c,b,a.callbackID,a.timeout)});a.query=g}if(a.form!==!1){a.query.redirect_uri=a.redirect_uri,a.query.state=JSON.stringify({callback:a.callbackID});var h;if("function"==typeof a.form&&(h=a.form(a,a.query)),"post"===a.method&&h!==!1)return void c(a,function(c){d.post(c,a.data,h,b,a.callbackID,a.timeout)})}b(e("invalid_request","There was no mechanism for handling this request"))},request_cors:function(a){return"withCredentials"in new XMLHttpRequest&&a()},domInstance:function(a,b){var c="HTML"+(a||"").replace(/^[a-z]/,function(a){return a.toUpperCase()})+"Element";return b?window[c]?b instanceof window[c]:window.Element?b instanceof window.Element&&(!a||b.tagName&&b.tagName.toLowerCase()===a):!(b instanceof Object||b instanceof Array||b instanceof String||b instanceof Number)&&b.tagName&&b.tagName.toLowerCase()===a:!1},clone:function(a){if(null===a||"object"!=typeof a||a instanceof Date||"nodeName"in a||this.isBinary(a))return a;if(Array.isArray(a))return a.map(this.clone.bind(this));var b={};for(var c in a)b[c]=this.clone(a[c]);return b},xhr:function(a,b,c,d,e){function f(a){for(var b,c={},d=/([a-z\-]+):\s?(.*);?/gi;b=d.exec(a);)c[b[1]]=b[2];return c}var g=new XMLHttpRequest,h=this.error,i=!1;"blob"===a&&(i=a,a="GET"),a=a.toUpperCase(),g.onload=function(){var b=g.response;try{b=JSON.parse(g.responseText)}catch(c){401===g.status&&(b=h("access_denied",g.statusText))}var d=f(g.getAllResponseHeaders());d.statusCode=g.status,e(b||("GET"===a?h("empty_response","Could not get resource"):{}),d)},g.onerror=function(){var a=g.responseText;try{a=JSON.parse(g.responseText)}catch(b){}e(a||h("access_denied","Could not get resource"))};var j;if("GET"===a||"DELETE"===a)d=null;else if(!(!d||"string"==typeof d||d instanceof FormData||d instanceof File||d instanceof Blob)){var k=new FormData;for(j in d)d.hasOwnProperty(j)&&(d[j]instanceof HTMLInputElement?"files"in d[j]&&d[j].files.length>0&&k.append(j,d[j].files[0]):d[j]instanceof Blob?k.append(j,d[j],d.name):k.append(j,d[j]));d=k}if(g.open(a,b,!0),i&&("responseType"in g?g.responseType=i:g.overrideMimeType("text/plain; charset=x-user-defined")),c)for(j in c)g.setRequestHeader(j,c[j]);return g.send(d),g},jsonp:function(a,b,c,d){var e,f=this,g=f.error,h=0,i=document.getElementsByTagName("head")[0],j=g("server_error","server_error"),k=function(){h++||window.setTimeout(function(){b(j),i.removeChild(l)},0)};c=f.globalEvent(function(a){return j=a,!0},c),a=a.replace(new RegExp("=\\?(&|$)"),"="+c+"$1");var l=f.append("script",{id:c,name:c,src:a,async:!0,onload:k,onerror:k,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&k()}});window.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(e=f.append("script",{text:"document.getElementById('"+callbackId+"').onerror();"}),l.async=!1),d&&window.setTimeout(function(){j=g("timeout","timeout"),k()},d),i.appendChild(l),e&&i.appendChild(e)},post:function(a,b,c,d,e,f){var g,h=this,i=h.error,j=document,k=null,l=[],m=0,n=null,o=0,p=function(a){o++||d(a)};h.globalEvent(p,e);var q;try{q=j.createElement('<iframe name="'+e+'">')}catch(r){q=j.createElement("iframe")}if(q.name=e,q.id=e,q.style.display="none",c&&c.callbackonload&&(q.onload=function(){p({response:"posted",message:"Content was posted"})}),f&&setTimeout(function(){p(i("timeout","The post operation timed out"))},f),j.body.appendChild(q),h.domInstance("form",b)){for(k=b.form,m=0;m<k.elements.length;m++)k.elements[m]!==b&&k.elements[m].setAttribute("disabled",!0);b=k}if(h.domInstance("form",b))for(k=b,m=0;m<k.elements.length;m++)k.elements[m].disabled||"file"!==k.elements[m].type||(k.encoding=k.enctype="multipart/form-data",k.elements[m].setAttribute("name","file"));else{for(n in b)b.hasOwnProperty(n)&&h.domInstance("input",b[n])&&"file"===b[n].type&&(k=b[n].form,k.encoding=k.enctype="multipart/form-data");k||(k=j.createElement("form"),j.body.appendChild(k),g=k);var s;for(n in b)if(b.hasOwnProperty(n)){var t=h.domInstance("input",b[n])||h.domInstance("textArea",b[n])||h.domInstance("select",b[n]);if(t&&b[n].form===k)t&&b[n].name!==n&&(b[n].setAttribute("name",n),b[n].name=n);else{var u=k.elements[n];if(s)for(u instanceof NodeList||(u=[u]),m=0;m<u.length;m++)u[m].parentNode.removeChild(u[m]);s=j.createElement("input"),s.setAttribute("type","hidden"),s.setAttribute("name",n),s.value=t?b[n].value:h.domInstance(null,b[n])?b[n].innerHTML||b[n].innerText:b[n],k.appendChild(s)}}for(m=0;m<k.elements.length;m++)s=k.elements[m],s.name in b||s.getAttribute("disabled")===!0||(s.setAttribute("disabled",!0),l.push(s))}k.setAttribute("method","POST"),k.setAttribute("target",e),k.target=e,k.setAttribute("action",a),setTimeout(function(){k.submit(),setTimeout(function(){try{g&&g.parentNode.removeChild(g)}catch(a){try{console.error("HelloJS: could not remove iframe")}catch(b){}}for(var c=0;c<l.length;c++)l[c]&&(l[c].setAttribute("disabled",!1),l[c].disabled=!1)},0)},100)},hasBinary:function(a){for(var b in a)if(a.hasOwnProperty(b)&&this.isBinary(a[b]))return!0;return!1},isBinary:function(a){return a instanceof Object&&(this.domInstance("input",a)&&"file"===a.type||"FileList"in window&&a instanceof window.FileList||"File"in window&&a instanceof window.File||"Blob"in window&&a instanceof window.Blob)},toBlob:function(a){var b=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,c=a.match(b);if(!c)return a;for(var d=atob(a.replace(b,"")),e=[],f=0;f<d.length;f++)e.push(d.charCodeAt(f));return new Blob([new Uint8Array(e)],{type:c[1]})}}),function(a){var b=a.api,c=a.utils;c.extend(c,{dataToJSON:function(a){var b=this,c=window,d=a.data;if(b.domInstance("form",d)?d=b.nodeListToJSON(d.elements):"NodeList"in c&&d instanceof NodeList?d=b.nodeListToJSON(d):b.domInstance("input",d)&&(d=b.nodeListToJSON([d])),("File"in c&&d instanceof c.File||"Blob"in c&&d instanceof c.Blob||"FileList"in c&&d instanceof c.FileList)&&(d={file:d}),!("FormData"in c&&d instanceof c.FormData))for(var e in d)if(d.hasOwnProperty(e))if("FileList"in c&&d[e]instanceof c.FileList)1===d[e].length&&(d[e]=d[e][0]);else{if(b.domInstance("input",d[e])&&"file"===d[e].type)continue;b.domInstance("input",d[e])||b.domInstance("select",d[e])||b.domInstance("textArea",d[e])?d[e]=d[e].value:b.domInstance(null,d[e])&&(d[e]=d[e].innerHTML||d[e].innerText)}return a.data=d,d},nodeListToJSON:function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];!d.disabled&&d.name&&(b[d.name]="file"===d.type?d:d.value||d.innerHTML)}return b}}),a.api=function(){var a=c.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return a.data&&c.dataToJSON(a),b.call(this,a)}}(hello),"object"==typeof chrome&&"object"==typeof chrome.identity&&chrome.identity.launchWebAuthFlow&&!function(){function a(b,c){var d={closed:!1};return chrome.identity.launchWebAuthFlow({url:b,interactive:c},function(b){if(void 0===b)return void(d.closed=!0);var c=hello.utils.url(b),e={location:{assign:function(b){a(b,!1)},search:c.search,hash:c.hash,href:c.href},close:function(){}};hello.utils.responseHandler(e,window)}),d}hello.utils.popup=function(b){return a(b,!0)},hello.utils.iframe=function(b){a(b,!1)},hello.utils.request_cors=function(a){return a(),!0};var b={};chrome.storage.local.get("hello",function(a){b=a.hello}),hello.utils.store=function(a,c){return 0===arguments.length?b:1===arguments.length?b[a]||null:c?(b[a]=c,chrome.storage.local.set({hello:b}),c):null===c?(delete b[a],chrome.storage.local.set({hello:b}),null):void 0}}(),function(a){function b(a){a&&"error"in a&&(a.error={code:"server_error",message:a.error.message||a.error})}function c(b,c,d){if(!("object"!=typeof b||"undefined"!=typeof Blob&&b instanceof Blob||"undefined"!=typeof ArrayBuffer&&b instanceof ArrayBuffer||"error"in b)){var e=("app_folder"!==b.root?b.root:"")+b.path.replace(/\&/g,"%26");e=e.replace(/^\//,""),b.thumb_exists&&(b.thumbnail=d.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/auto/"+e+"?format=jpeg&size=m")+"&access_token="+d.options.access_token),b.type=b.is_dir?"folder":b.mime_type,b.name=b.path.replace(/.*\//g,""),b.is_dir?b.files=e.replace(/^\//,""):(b.downloadLink=a.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/auto/"+e)+"&access_token="+d.options.access_token,b.file="https://api-content.dropbox.com/1/files/auto/"+e),b.id||(b.id=b.path.replace(/^\//,""))}}function d(a){return function(b,c){delete b.query.limit,c(a)}}var e={version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},f={version:2,auth:"https://www.dropbox.com/1/oauth2/authorize",grant:"https://api.dropbox.com/1/oauth2/token"};a.init({dropbox:{name:"Dropbox",oauth:f,login:function(b){b.qs.scope="",delete b.qs.display;var c=decodeURIComponent(b.qs.redirect_uri);a.services.dropbox.oauth=0===c.indexOf("http:")&&0!==c.indexOf("http://localhost/")?e:f,b.options.popup.width=1e3,b.options.popup.height=1e3},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":d("metadata/auto/@{parent|}"),"me/folder":d("metadata/auto/@{id}"),"me/folders":d("metadata/auto/"),"default":function(a,b){a.path.match("https://api-content.dropbox.com/1/files/")&&(a.method="blob"),b(a.path)}},post:{"me/files":function(b,c){var d=b.data.parent,e=b.data.name;b.data={file:b.data.file},"string"==typeof b.data.file&&(b.data.file=a.utils.toBlob(b.data.file)),c("https://api-content.dropbox.com/1/files_put/auto/"+d+"/"+e)},"me/folders":function(b,c){var d=b.data.name;b.data={},c("fileops/create_folder?root=@{root|sandbox}&"+a.utils.param({path:d}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(a){if(b(a),!a.uid)return a;a.name=a.display_name;var c=a.name.split(" ");return a.first_name=c.shift(),a.last_name=c.join(" "),a.id=a.uid,delete a.uid,delete a.display_name,a},"default":function(a,d,e){return b(a),a.is_dir&&a.contents&&(a.data=a.contents,delete a.contents,a.data.forEach(function(b){b.root=a.root,c(b,d,e)})),c(a,d,e),a.is_deleted&&(a.success=!0),a}},xhr:function(a){if(a.data&&a.data.file){var b=a.data.file;b&&(a.data=b.files?b.files[0]:b)}return"delete"===a.method&&(a.method="post"),!0},form:function(a,b){delete b.state,delete b.redirect_uri}}})}(hello),function(a){function b(a){return a.id&&(a.thumbnail=a.picture="https://graph.facebook.com/"+a.id+"/picture"),a}function c(a){return"data"in a&&a.data.forEach(b),a}function d(a,b,c){if("boolean"==typeof a&&(a={success:a}),a&&"data"in a){var d=c.query.access_token;a.data.forEach(function(a){a.picture&&(a.thumbnail=a.picture),a.pictures=(a.images||[]).sort(function(a,b){return a.width-b.width}),a.cover_photo&&a.cover_photo.id&&(a.thumbnail=e+a.cover_photo.id+"/picture?access_token="+d),"album"===a.type&&(a.files=a.photos=e+a.id+"/photos"),a.can_upload&&(a.upload_location=e+a.id+"/photos")})}return a}a.init({facebook:{name:"Facebook",oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},scope:{basic:"public_profile",email:"email",share:"user_posts",birthday:"user_birthday",events:"user_events",photos:"user_photos,user_videos",videos:"user_photos,user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:"offline_access"},refresh:!0,login:function(a){a.options.force&&(a.qs.auth_type="reauthenticate"),a.options.popup.width=580,a.options.popup.height=400},logout:function(b,c){var d=a.utils.globalEvent(b),e=encodeURIComponent(a.settings.redirect_uri+"?"+a.utils.param({callback:d,result:JSON.stringify({force:!0
}),state:"{}"})),f=(c.authResponse||{}).access_token;return a.utils.iframe("https://www.facebook.com/logout.php?next="+e+"&access_token="+f),f?void 0:!1},base:"https://graph.facebook.com/v2.4/",get:{me:"me?fields=email,first_name,last_name,name,timezone,verified","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/like":"me/likes","me/files":"me/albums","me/albums":"me/albums?fields=cover_photo,name","me/album":"@{id}/photos?fields=picture","me/photos":"me/photos","me/photo":"@{id}","friend/albums":"@{id}/albums","friend/photos":"@{id}/photos"},post:{"me/share":"me/feed","me/photo":"@{id}"},wrap:{me:b,"me/friends":c,"me/following":c,"me/followers":c,"me/albums":d,"me/photos":d,"me/files":d,"default":d},xhr:function(b,c){return("get"===b.method||"post"===b.method)&&(c.suppress_response_codes=!0),"post"===b.method&&b.data&&"string"==typeof b.data.file&&(b.data.file=a.utils.toBlob(b.data.file)),!0},jsonp:function(b,c){var d=b.method;"get"===d||a.utils.hasBinary(b.data)?"delete"===b.method&&(c.method="delete",b.method="post"):(b.data.method=d,b.method="get")},form:function(){return{callbackonload:!0}}}});var e="https://graph.facebook.com/"}(hello),function(a){function b(b,c,d){var e=(d?"":"flickr:")+"?method="+b+"&api_key="+a.services.flickr.id+"&format=json";for(var f in c)c.hasOwnProperty(f)&&(e+="&"+f+"="+c[f]);return e}function c(b){var c=a.getAuthResponse("flickr");b(c&&c.user_nsid?c.user_nsid:null)}function d(a,d){return d||(d={}),function(e,f){c(function(c){d.user_id=c,f(b(a,d,!0))})}}function e(a,b){var c="https://www.flickr.com/images/buddyicon.gif";return a.nsid&&a.iconserver&&a.iconfarm&&(c="https://farm"+a.iconfarm+".staticflickr.com/"+a.iconserver+"/buddyicons/"+a.nsid+(b?"_"+b:"")+".jpg"),c}function f(a,b,c,d,e){return e=e?"_"+e:"","https://farm"+b+".staticflickr.com/"+c+"/"+a+"_"+d+e+".jpg"}function g(a){a&&a.stat&&"ok"!=a.stat.toLowerCase()&&(a.error={code:"invalid_request",message:a.message})}function h(a){if(a.photoset||a.photos){var b="photoset"in a?"photoset":"photos";a=j(a,b),l(a),a.data=a.photo,delete a.photo;for(var c=0;c<a.data.length;c++){var d=a.data[c];d.name=d.title,d.picture=f(d.id,d.farm,d.server,d.secret,""),d.pictures=i(d.id,d.farm,d.server,d.secret),d.source=f(d.id,d.farm,d.server,d.secret,"b"),d.thumbnail=f(d.id,d.farm,d.server,d.secret,"m")}}return a}function i(a,b,c,d){var e=2048,g=[{id:"t",max:100},{id:"m",max:240},{id:"n",max:320},{id:"",max:500},{id:"z",max:640},{id:"c",max:800},{id:"b",max:1024},{id:"h",max:1600},{id:"k",max:2048},{id:"o",max:e}];return g.map(function(e){return{source:f(a,b,c,d,e.id),width:e.max,height:e.max}})}function j(a,b){return b in a?a=a[b]:"error"in a||(a.error={code:"invalid_request",message:a.message||"Failed to get data from Flickr"}),a}function k(a){if(g(a),a.contacts){a=j(a,"contacts"),l(a),a.data=a.contact,delete a.contact;for(var b=0;b<a.data.length;b++){var c=a.data[b];c.id=c.nsid,c.name=c.realname||c.username,c.thumbnail=e(c,"m")}}return a}function l(a){a.page&&a.pages&&a.page!==a.pages&&(a.paging={next:"?page="+ ++a.page})}a.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:d("flickr.people.getInfo"),"me/friends":d("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":d("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":d("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":d("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/album":d("flickr.photosets.getPhotos",{photoset_id:"@{id}"}),"me/photos":d("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(a){if(g(a),a=j(a,"person"),a.id){if(a.realname){a.name=a.realname._content;var b=a.name.split(" ");a.first_name=b.shift(),a.last_name=b.join(" ")}a.thumbnail=e(a,"l"),a.picture=e(a,"l")}return a},"me/friends":k,"me/followers":k,"me/following":k,"me/albums":function(a){return g(a),a=j(a,"photosets"),l(a),a.photoset&&(a.data=a.photoset,a.data.forEach(function(a){a.name=a.title._content,a.photos="https://api.flickr.com/services/rest"+b("flickr.photosets.getPhotos",{photoset_id:a.id},!0)}),delete a.photoset),a},"me/photos":function(a){return g(a),h(a)},"default":function(a){return g(a),h(a)}},xhr:!1,jsonp:function(a,b){"get"==a.method&&(delete b.callback,b.jsoncallback=a.callbackID)}}})}(hello),function(a){function b(a){!a.meta||400!==a.meta.code&&401!==a.meta.code||(a.error={code:"access_denied",message:a.meta.errorDetail})}function c(a){a&&a.id&&(a.thumbnail=a.photo.prefix+"100x100"+a.photo.suffix,a.name=a.firstName+" "+a.lastName,a.first_name=a.firstName,a.last_name=a.lastName,a.contact&&a.contact.email&&(a.email=a.contact.email))}function d(a,b){var c=b.access_token;return delete b.access_token,b.oauth_token=c,b.v=20121125,!0}a.init({foursquare:{name:"Foursquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate",grant:"https://foursquare.com/oauth2/access_token"},refresh:!0,base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(a){return b(a),a&&a.response&&(a=a.response.user,c(a)),a},"default":function(a){return b(a),a&&"response"in a&&"friends"in a.response&&"items"in a.response.friends&&(a.data=a.response.friends.items,a.data.forEach(c),delete a.response),a}},xhr:d,jsonp:d}})}(hello),function(a){function b(a,b){var c=b?b.statusCode:a&&"meta"in a&&"status"in a.meta&&a.meta.status;(401===c||403===c)&&(a.error={code:"access_denied",message:a.message||(a.data?a.data.message:"Could not get response")},delete a.message)}function c(a){a.id&&(a.thumbnail=a.picture=a.avatar_url,a.name=a.login)}function d(a,b){if(a.data&&a.data.length&&b&&b.Link){var c=b.Link.match(/<(.*?)>;\s*rel=\"next\"/);c&&(a.paging={next:c[1]})}}a.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{basic:"",email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}","me/like":"user/starred?per_page=@{limit|100}"},wrap:{me:function(a,d){return b(a,d),c(a),a},"default":function(a,e,f){return b(a,e),Array.isArray(a)&&(a={data:a}),a.data&&(d(a,e,f),a.data.forEach(c)),a}},xhr:function(a){return"get"!==a.method&&a.data&&(a.headers=a.headers||{},a.headers["Content-Type"]="application/json","object"==typeof a.data&&(a.data=JSON.stringify(a.data))),!0}}})}(hello),function(a){function b(a){return parseInt(a,10)}function c(a){return k(a),a.data=a.items,delete a.items,a}function d(a){return a.error?void 0:(a.name||(a.name=a.title||a.message),a.picture||(a.picture=a.thumbnailLink),a.thumbnail||(a.thumbnail=a.thumbnailLink),"application/vnd.google-apps.folder"===a.mimeType&&(a.type="folder",a.files="https://www.googleapis.com/drive/v2/files?q=%22"+a.id+"%22+in+parents"),a)}function e(a){return{source:a.url,width:a.width,height:a.height}}function f(a){a.data=a.feed.entry.map(j),delete a.feed}function g(a){if(k(a),"feed"in a&&"entry"in a.feed)a.data=a.feed.entry.map(j),delete a.feed;else{if("entry"in a)return j(a.entry);"items"in a?(a.data=a.items.map(d),delete a.items):d(a)}return a}function h(a){a.name=a.displayName||a.name,a.picture=a.picture||(a.image?a.image.url:null),a.thumbnail=a.picture}function i(a,b,c){k(a);if("feed"in a&&"entry"in a.feed){for(var d=c.query.access_token,e=0;e<a.feed.entry.length;e++){var f=a.feed.entry[e];if(f.id=f.id.$t,f.name=f.title.$t,delete f.title,f.gd$email&&(f.email=f.gd$email&&f.gd$email.length>0?f.gd$email[0].address:null,f.emails=f.gd$email,delete f.gd$email),f.updated&&(f.updated=f.updated.$t),f.link){var g=f.link.length>0?f.link[0].href:null;g&&f.link[0].gd$etag&&(g+=(g.indexOf("?")>-1?"&":"?")+"access_token="+d,f.picture=g,f.thumbnail=g),delete f.link}f.category&&delete f.category}a.data=a.feed.entry,delete a.feed}return a}function j(a){var b,c=a.media$group,d=c.media$content.length?c.media$content[0]:{},f=c.media$content||[],g=c.media$thumbnail||[],h=f.concat(g).map(e).sort(function(a,b){return a.width-b.width}),i=0,j={id:a.id.$t,name:a.title.$t,description:a.summary.$t,updated_time:a.updated.$t,created_time:a.published.$t,picture:d?d.url:null,pictures:h,images:[],thumbnail:d?d.url:null,width:d.width,height:d.height};if("link"in a)for(i=0;i<a.link.length;i++){var k=a.link[i];if(k.rel.match(/\#feed$/)){j.upload_location=j.files=j.photos=k.href;break}}if("category"in a&&a.category.length)for(b=a.category,i=0;i<b.length;i++)b[i].scheme&&b[i].scheme.match(/\#kind$/)&&(j.type=b[i].term.replace(/^.*?\#/,""));return"media$thumbnail"in c&&c.media$thumbnail.length&&(b=c.media$thumbnail,j.thumbnail=b[0].url,j.images=b.map(e)),b=c.media$content,b&&b.length&&j.images.push(e(b[0])),j}function k(a){if("feed"in a&&a.feed.openSearch$itemsPerPage){var c=b(a.feed.openSearch$itemsPerPage.$t),d=b(a.feed.openSearch$startIndex.$t),e=b(a.feed.openSearch$totalResults.$t);e>d+c&&(a.paging={next:"?start="+(d+c)})}else"nextPageToken"in a&&(a.paging={next:"?pageToken="+a.nextPageToken})}function l(){function a(a){var c=new FileReader;c.onload=function(c){b(btoa(c.target.result),a.type+f+"Content-Transfer-Encoding: base64")},c.readAsBinaryString(a)}function b(a,b){c.push(f+"Content-Type: "+b+f+f+a),e--,h()}var c=[],d=(1e10*Math.random()).toString(32),e=0,f="\r\n",g=f+"--"+d,h=function(){},i=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(c,d){"string"!=typeof c&&"length"in Object(c)||(c=[c]);for(var g=0;g<c.length;g++){e++;var h=c[g];if("undefined"!=typeof File&&h instanceof File||"undefined"!=typeof Blob&&h instanceof Blob)a(h);else if("string"==typeof h&&h.match(i)){var j=h.match(i);b(h.replace(i,""),j[1]+f+"Content-Transfer-Encoding: base64")}else b(h,d)}},this.onready=function(a){(h=function(){0===e&&(c.unshift(""),c.push("--"),a(c.join(g),d),c=[])})()}}function m(a,b){var c={};a.data&&"undefined"!=typeof HTMLInputElement&&a.data instanceof HTMLInputElement&&(a.data={file:a.data}),!a.data.name&&Object(Object(a.data.file).files).length&&"post"===a.method&&(a.data.name=a.data.file.files[0].name),"post"===a.method?a.data={title:a.data.name,parents:[{id:a.data.parent||"root"}],file:a.data.file}:(c=a.data,a.data={},c.parent&&(a.data.parents=[{id:a.data.parent||"root"}]),c.file&&(a.data.file=c.file),c.name&&(a.data.title=c.name));var d;if("file"in a.data&&(d=a.data.file,delete a.data.file,"object"==typeof d&&"files"in d&&(d=d.files),!d||!d.length))return void b({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var e=new l;e.append(JSON.stringify(a.data),"application/json"),d&&e.append(d),e.onready(function(d,e){a.headers["content-type"]='multipart/related; boundary="'+e+'"',a.data=d,b("upload/drive/v2/files"+(c.id?"/"+c.id:"")+"?uploadType=multipart")})}function n(a){if("object"==typeof a.data)try{a.data=JSON.stringify(a.data),a.headers["content-type"]="application/json"}catch(b){}}var o="https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}";a.init({google:{name:"Google Plus",oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",create_event:"",offline_access:""},scope_delim:" ",login:function(a){"none"===a.qs.display&&(a.qs.display=""),"code"===a.qs.response_type&&(a.qs.access_type="offline"),a.options.force&&(a.qs.approval_prompt="force")},base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":o,"me/followers":o,"me/contacts":o,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(a,b){var c=a.query.id;delete a.query.id,b(c.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":m,"me/folders":function(a,b){a.data={title:a.data.name,parents:[{id:a.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},b("drive/v2/files")}},put:{"me/files":m},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},wrap:{me:function(a){return a.id&&(a.last_name=a.family_name||(a.name?a.name.familyName:null),a.first_name=a.given_name||(a.name?a.name.givenName:null),a.emails&&a.emails.length&&(a.email=a.emails[0].value),h(a)),a},"me/friends":function(a){return a.items&&(k(a),a.data=a.items,a.data.forEach(h),delete a.items),a},"me/contacts":i,"me/followers":i,"me/following":i,"me/share":c,"me/feed":c,"me/albums":g,"me/photos":f,"default":g},xhr:function(a){return("post"===a.method||"put"===a.method)&&n(a),!0},form:!1}})}(hello),function(a){function b(a){return{source:a.url,width:a.width,height:a.height}}function c(a){return"string"==typeof a?{error:{code:"invalid_request",message:a}}:(a&&"meta"in a&&"error_type"in a.meta&&(a.error={code:a.meta.error_type,message:a.meta.error_message}),a)}function d(a){return f(a),a&&"data"in a&&a.data.forEach(e),a}function e(a){a.id&&(a.thumbnail=a.profile_picture,a.name=a.full_name||a.username)}function f(a){"pagination"in a&&(a.paging={next:a.pagination.next_url},delete a.pagination)}a.init({instagram:{name:"Instagram",oauth:{version:2,auth:"https://instagram.com/oauth/authorize/",grant:"https://api.instagram.com/oauth/access_token"},refresh:!0,scope:{basic:"basic",friends:"relationships",publish:"likes comments"},scope_delim:" ",login:function(a){a.qs.display=""},base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}","friend/photos":"users/@{id}/media/recent?min_id=0&count=@{limit|100}"},post:{"me/like":function(a,b){var c=a.data.id;a.data={},b("media/"+c+"/likes")}},del:{"me/like":"media/@{id}/likes"},wrap:{me:function(a){return c(a),"data"in a&&(a.id=a.data.id,a.thumbnail=a.data.profile_picture,a.name=a.data.full_name||a.data.username),a},"me/friends":d,"me/following":d,"me/followers":d,"me/photos":function(a){return c(a),f(a),"data"in a&&(a.data=a.data.filter(function(a){return"image"===a.type}),a.data.forEach(function(a){a.name=a.caption?a.caption.text:null,a.thumbnail=a.images.thumbnail.url,a.picture=a.images.standard_resolution.url,a.pictures=Object.keys(a.images).map(function(c){var d=a.images[c];return b(d)}).sort(function(a,b){return a.width-b.width})})),a},"default":function(a){return a=c(a),f(a),a}},xhr:function(a){var b=a.method,c="get"!==b;return c&&("post"!==b&&"put"!==b||!a.query.access_token||(a.data.access_token=a.query.access_token,delete a.query.access_token),a.proxy=c),c},form:!1}})}(hello),function(a){function b(a,b){var c,e;return a&&"Message"in a&&(e=a.Message,delete a.Message,"ErrorCode"in a?(c=a.ErrorCode,delete a.ErrorCode):c=d(b),a.error={code:c,message:e,details:a}),a}function c(a,b){var c=b.access_token;return delete b.access_token,a.headers.Authorization="Bearer "+c,"get"!==a.method&&a.data&&(a.headers["Content-Type"]="application/json","object"==typeof a.data&&(a.data=JSON.stringify(a.data))),"put"===a.method&&(a.method="patch"),!0}function d(a){switch(a.statusCode){case 400:return"invalid_request";case 403:return"stale_token";case 401:return"invalid_token";case 500:return"server_error";default:return"server_error"}}a.init({joinme:{name:"join.me",oauth:{version:2,auth:"https://secure.join.me/api/public/v1/auth/oauth2",grant:"https://secure.join.me/api/public/v1/auth/oauth2"},refresh:!1,scope:{basic:"user_info",user:"user_info",scheduler:"scheduler",start:"start_meeting"},scope_delim:" ",login:function(a){a.options.popup.width=400,a.options.popup.height=700},base:"https://api.join.me/v1/",get:{me:"user",meetings:"meetings","meetings/info":"meetings/@{id}"},post:{"meetings/start/adhoc":function(a,b){b("meetings/start")},"meetings/start/scheduled":function(a,b){var c=a.data.meetingId;a.data={},b("meetings/"+c+"/start")},"meetings/schedule":function(a,b){b("meetings")}},patch:{"meetings/update":function(a,b){b("meetings/"+a.data.meetingId)}},del:{"meetings/delete":"meetings/@{id}"},wrap:{me:function(a,c){return b(a,c),a.email?(a.name=a.fullName,a.first_name=a.name.split(" ")[0],a.last_name=a.name.split(" ")[1],a.id=a.email,a):a},"default":function(a,c){return b(a,c),a}},xhr:c}})}(hello),function(a){function b(a){a&&"errorCode"in a&&(a.error={code:a.status,message:a.message})}function c(a){return a.error?void 0:(a.first_name=a.firstName,a.last_name=a.lastName,a.name=a.formattedName||a.first_name+" "+a.last_name,a.thumbnail=a.pictureUrl,a.email=a.emailAddress,a)}function d(a){return b(a),e(a),a.values&&(a.data=a.values.map(c),delete a.values),a}function e(a){"_count"in a&&"_start"in a&&a._count+a._start<a._total&&(a.paging={next:"?start="+(a._start+a._count)+"&count="+a._count})}function f(a,b){"{}"===JSON.stringify(a)&&200===b.statusCode&&(a.success=!0)}function g(a){a.access_token&&(a.oauth2_access_token=a.access_token,delete a.access_token)}function h(a,b){a.headers["x-li-format"]="json";var c=a.data.id;a.data=("delete"!==a.method).toString(),a.method="put",b("people/~/network/updates/key="+c+"/is-liked")}a.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_basicprofile",email:"r_emailaddress",friends:"",publish:"w_share"},scope_delim:" ",base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)","me/friends":"people/~/connections?count=@{limit|500}","me/followers":"people/~/connections?count=@{limit|500}","me/following":"people/~/connections?count=@{limit|500}","me/share":"people/~/network/updates?count=@{limit|250}"},post:{"me/share":function(a,b){var c={visibility:{code:"anyone"}};a.data.id?c.attribution={share:{id:a.data.id}}:(c.comment=a.data.message,a.data.picture&&a.data.link&&(c.content={"submitted-url":a.data.link,"submitted-image-url":a.data.picture})),a.data=JSON.stringify(c),b("people/~/shares?format=json")},"me/like":h},del:{"me/like":h},wrap:{me:function(a){return b(a),c(a),a},"me/friends":d,"me/following":d,"me/followers":d,"me/share":function(a){return b(a),e(a),a.values&&(a.data=a.values.map(c),a.data.forEach(function(a){a.message=a.headline}),delete a.values),a},"default":function(a,c){b(a),f(a,c),e(a)}},jsonp:function(a,b){g(b),"get"===a.method&&(b.format="jsonp",b["error-callback"]=a.callbackID)},xhr:function(a,b){return"get"!==a.method?(g(b),a.headers["Content-Type"]="application/json",a.headers["x-li-format"]="json",a.proxy=!0,!0):!1}}})}(hello),function(a){function b(a,b){var c=b.access_token;return delete b.access_token,b.oauth_token=c,b["_status_code_map[302]"]=200,!0}function c(a){return a.id&&(a.picture=a.avatar_url,a.thumbnail=a.avatar_url,a.name=a.username||a.full_name),a}function d(a){"next_href"in a&&(a.paging={next:a.next_href})}a.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect",grant:"https://soundcloud.com/oauth2/token"},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json","default":function(a,b){b(a.path+".json")}},wrap:{me:function(a){return c(a),a},"default":function(a){return Array.isArray(a)&&(a={data:a.map(c)}),d(a),a}},xhr:b,jsonp:b}})}(hello),function(a){function b(a){if(a.id){if(a.name){var b=a.name.split(" ");a.first_name=b.shift(),a.last_name=b.join(" ")}a.thumbnail=a.profile_image_url_https||a.profile_image_url}return a}function c(a){return d(a),e(a),a.users&&(a.data=a.users.map(b),delete a.users),a}function d(a){if(a.errors){var b=a.errors[0];a.error={code:"request_failed",message:b.message}}}function e(a){"next_cursor_str"in a&&(a.paging={next:"?cursor="+a.next_cursor_str})}function f(a){return Array.isArray(a)?{data:a}:a}var g="https://api.twitter.com/";a.init({twitter:{oauth:{version:"1.0a",auth:g+"oauth/authenticate",request:g+"oauth/request_token",token:g+"oauth/access_token"},login:function(a){var b="?force_login=true";this.oauth.auth=this.oauth.auth.replace(b,"")+(a.options.force?b:"")},base:g+"1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}","me/like":"favorites/list.json?count=@{limit|200}"},post:{"me/share":function(b,c){var d=b.data;b.data=null;var e=[];d.message&&(e.push(d.message),delete d.message),d.link&&(e.push(d.link),delete d.link),d.picture&&(e.push(d.picture),delete d.picture),e.length&&(d.status=e.join(" ")),d.file?(d["media[]"]=d.file,delete d.file,b.data=d,c("statuses/update_with_media.json")):"id"in d?c("statuses/retweet/"+d.id+".json"):(a.utils.extend(b.query,d),c("statuses/update.json?include_entities=1"))},"me/like":function(a,b){var c=a.data.id;a.data=null,b("favorites/create.json?id="+c)}},del:{"me/like":function(){p.method="post";var a=p.data.id;p.data=null,callback("favorites/destroy.json?id="+a)}},wrap:{me:function(a){return d(a),b(a),a},"me/friends":c,"me/followers":c,"me/following":c,"me/share":function(a){return d(a),e(a),!a.error&&"length"in a?{data:a}:a},"default":function(a){return a=f(a),e(a),a}},xhr:function(a){return"get"!==a.method}}})}(hello),function(a){function b(a,b){return null!==a&&"response"in a&&null!==a.response&&a.response.length&&(a=a.response[0],a.id=a.uid,a.thumbnail=a.picture=a.photo_max,a.name=a.first_name+" "+a.last_name,b.authResponse&&null!==b.authResponse.email&&(a.email=b.authResponse.email)),a}function c(a){if(a.error){var b=a.error;a.error={code:b.error_code,message:b.error_msg}}}a.init({vk:{name:"Vk",oauth:{version:2,auth:"https://oauth.vk.com/authorize",grant:"https://oauth.vk.com/access_token"},scope:{basic:"",email:"email",offline_access:"offline"},refresh:!0,login:function(a){a.qs.display=window.navigator&&window.navigator.userAgent&&/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase())?"mobile":"popup"},base:"https://api.vk.com/method/",get:{me:function(a,b){a.query.fields="id,first_name,last_name,photo_max",b("users.get")}},wrap:{me:function(a,d,e){return c(a),b(a,e)}},xhr:!1,jsonp:!0,form:!1}})}(hello),function(a){function b(a){return"data"in a&&a.data.forEach(function(a){a.picture&&(a.thumbnail=a.picture),a.images&&(a.pictures=a.images.map(c).sort(function(a,b){return a.width-b.width}))}),a}function c(a){return{width:a.width,height:a.height,source:a.source}}function d(a){return"data"in a&&a.data.forEach(function(a){a.photos=a.files="https://apis.live.net/v5.0/"+a.id+"/photos"}),a}function e(a,b,c){if(a.id){var d=c.query.access_token;if(a.emails&&(a.email=a.emails.preferred),a.is_friend!==!1){var e=a.user_id||a.id;a.thumbnail=a.picture="https://apis.live.net/v5.0/"+e+"/picture?access_token="+d}}return a}function f(a,b,c){return"data"in a&&a.data.forEach(function(a){e(a,b,c)}),a}a.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf",grant:"https://login.live.com/oauth20_token.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:e,"me/friends":f,"me/contacts":f,"me/followers":f,"me/following":f,"me/albums":d,"me/photos":b,"default":b},xhr:function(b){return"get"===b.method||"delete"===b.method||a.utils.hasBinary(b.data)||("string"==typeof b.data.file?b.data.file=a.utils.toBlob(b.data.file):(b.data=JSON.stringify(b.data),b.headers={"Content-Type":"application/json"})),!0},jsonp:function(b){"get"===b.method||a.utils.hasBinary(b.data)||(b.data.method=b.method,b.method="get")}}})}(hello),function(a){function b(a){a&&"meta"in a&&"error_type"in a.meta&&(a.error={code:a.meta.error_type,message:a.meta.error_message})}function c(a){if(b(a),a.query&&a.query.results&&a.query.results.profile){a=a.query.results.profile,a.id=a.guid,a.last_name=a.familyName,a.first_name=a.givenName||a.nickname;var c=[];a.first_name&&c.push(a.first_name),a.last_name&&c.push(a.last_name),a.name=c.join(" "),a.email=a.emails&&a.emails[0]?a.emails[0].handle:null,a.thumbnail=a.image?a.image.imageUrl:null}return a}function d(a,c,d){b(a),f(a,c,d);return a.query&&a.query.results&&a.query.results.contact&&(a.data=a.query.results.contact,delete a.query,Array.isArray(a.data)||(a.data=[a.data]),a.data.forEach(e)),a}function e(a){a.id=null,(a.fields||[]).forEach(function(b){"email"===b.type&&(a.email=b.value),"name"===b.type&&(a.first_name=b.value.givenName,a.last_name=b.value.familyName,a.name=b.value.givenName+" "+b.value.familyName),"yahooid"===b.type&&(a.id=b.value)})}function f(a,b,c){return a.query&&a.query.count&&c.options&&(a.paging={next:"?start="+(a.query.count+(+c.options.start||1))}),a}function g(a){return"https://query.yahooapis.com/v1/yql?q="+(a+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"}a.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},login:function(a){a.options.popup.width=560;try{delete a.qs.state.scope}catch(b){}},base:"https://social.yahooapis.com/v1/",get:{me:g("select * from social.profile(0) where guid=me"),"me/friends":g("select * from social.contacts(0) where guid=me"),"me/following":g("select * from social.contacts(0) where guid=me")},wrap:{me:c,"me/friends":d,"me/following":d,"default":f}}})}(hello),"function"==typeof define&&define.amd&&define(function(){return hello}),"object"==typeof module&&module.exports&&(module.exports=hello);